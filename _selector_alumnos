<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <?!= HtmlService.createHtmlOutputFromFile('_selector_alumnos.css.html').getContent(); ?>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <div class="header-left">
                <h1>📚 Selector de Alumnos</h1>
                <p>Elige un alumno para trabajar con sus evaluaciones</p>
            </div>
            <div class="header-actions">
                <button class="btn-header" onclick="abrirConfiguracion()">
                    ⚙️ Configuración
                </button>
                <button class="btn-header" onclick="actualizarLista()">
                    🔄 Actualizar
                </button>
            </div>
        </div>

        <div class="stats-bar" id="statsBar">
            <div class="stats-item">
                <div class="stats-icon" style="background: #9aa0a6;">⭕</div>
                <span>Sin empezar: <strong id="countSinEmpezar">0</strong></span>
            </div>
            <div class="stats-item">
                <div class="stats-icon" style="background: #fbbc04;">🟡</div>
                <span>1ª Evaluación: <strong id="countParcial">0</strong></span>
            </div>
            <div class="stats-item">
                <div class="stats-icon" style="background: #34a853;">✅</div>
                <span>Completados: <strong id="countTerminado">0</strong></span>
            </div>
            <div class="stats-item">
                <span>Total: <strong id="countTotal">0</strong></span>
            </div>
        </div>

        <div class="content">
            <div class="search-section">
                <input type="text" id="searchInput" class="search-input" 
                       placeholder="🔍 Buscar alumno por nombre..." 
                       oninput="filtrarAlumnos()">
            </div>

            <div class="alumnos-grid" id="alumnosGrid">
                <div class="loading" id="loadingState">
                    <div class="spinner"></div>
                    <div>Cargando alumnos...</div>
                </div>
            </div>

            <div class="empty-state" id="emptyState" style="display: none;">
                <h3>📝 No hay alumnos configurados</h3>
                <p>Para empezar a trabajar, necesitas configurar primero las hojas de alumnos.</p>
                <button class="btn-action btn-evaluar" onclick="abrirConfiguracion()" 
                        style="max-width: 200px; margin: 0 auto;">
                    ⚙️ Ir a Configuración
                </button>
            </div>
        </div>

        <div class="status" id="status"></div>

        <div class="footer">
            <div class="footer-info">
                <strong>Sistema Txostenak</strong> - Selecciona un alumno para continuar
            </div>
            <button class="btn-cancel" onclick="cerrarModal()">
                ❌ Cerrar
            </button>
        </div>
    </div>

    <?!= HtmlService.createHtmlOutputFromFile('_selector_alumnos.js.html').getContent(); ?>
</body>
</html>
